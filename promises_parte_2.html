<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <h1>TESTE</h1>
    <script>
        let promessa = new Promise((resolve, reject) => {
            /* try {
                
            } catch (e) {
                
            } */

            // Requisição http par recuperar uma relação de usuários
            setTimeout(() => {

                // Requisição foi realizada de algum modo
                let resposta_da_requisicao = {}

                // Erro na requisição
                if (false) {
                    resposta_da_requisicao = {
                        codigo: 1050,
                        erro: 'Falha na requisição'
                    }

                    reject(resposta_da_requisicao)
                }

                resposta_da_requisicao = {
                    0: { id: 1, nome: 'João' },
                    1: { id: 2, nome: 'José' },
                    2: { id: 3, nome: 'Maria' }
                }

                resolve(resposta_da_requisicao)

            }, 4000)

        }).then(dados => {
            console.log(dados)

            let promessa2 = new Promise((resolve, reject) => {

                // Requisição http par recuperar uma relação de posts dos usuários
                setTimeout(() => {

                    // Requisição foi realizada de algum modo
                    let resposta_da_requisicao = {}

                    // Erro na requisição
                    if (false) {
                        resposta_da_requisicao = {
                            codigo: 7788,
                            erro: 'Erro ao recuperar os posts dos usuários'
                        }

                        reject(resposta_da_requisicao)
                    }

                    resposta_da_requisicao = {
                        0: {
                            id: 1, usuario_id: 1, post: [
                                { id: 1, post: 'Post 1' },
                                { id: 2, post: 'Post 2' }
                            ]
                        },
                        1: {
                            id: 2, usuario_id: 2, post: [
                                { id: 3, post: 'Post 1' },
                                { id: 4, post: 'Post 2' }
                            ]
                        },
                        2: {
                            id: 3, usuario_id: 3, post: [
                                { id: 5, post: 'Post 1' },
                                { id: 6, post: 'Post 2' }
                            ]
                        },
                    }

                    resolve(resposta_da_requisicao)

                }, 4000)

            }).then((dados) => {

                console.log(dados)

            }).catch(erro => {

                console.log(erro)

            })

        }).then((param) => {

            console.log('Then número 2', param)

        }).then(() => {

            console.log('Then número 3')

        }).then(() => {

            console.log('Then número 4')
            return 'Parâmetro capturado no Then anterior'

        }).catch(erro => {

            console.log('Operação sequencial (catch): ', erro)
            return 'Parâmetro capturado no catch e enviado para o Then seguinte'

        }).then((param) => {

            console.log('Then número 5', param)

        }).then(() => {

            console.log('Then número 6')

        })

    </script>
</body>

</html>